# JDEX PROJECT
<br/>

## 1. íŒ€ ì†Œê°œ

### BEB-05-Final-04ì¡°

- **íŒ€ ëª… : ì¢…ë±ìŠ¤**
- **í”„ë¡œì íŠ¸ ëª… : JDEX**
- **íŒ€ì¥ : ì„œì¢…ëŒ€**
- **íŒ€ì› : ê¹€ìœ¤ê²¸, í™ìœ ì§„**
- **Github Repo : https://github.com/codestates/BEB-05-final-JDEX**
- **Date : 2022/08/31 - 2022/09/30**
- **íŒ€ ë£°**
    
    â†’ ë§¤ì¼ ì˜¤ì „ 10ì‹œ, ì˜¤í›„ 5ì‹œ í•„ìˆ˜ íšŒì˜ ì§„í–‰íšŒì˜ë¡ ì‘ì„±
    
    â†’ íšŒì˜ë¡ ì‘ì„±
    
    â†’ ê·¸ ë‚ ì˜ ì§„í–‰ ê³„íš ë° ì§„í–‰ ì¤‘ì¸ ìƒí™© ê³µìœ 
    
<br/>
<br/>

## 2. í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ’¸Â **JDEX í”„ë¡œì íŠ¸ ëª©í‘œ**

### â†’ *Klaytn ê¸°ë°˜ì˜ DEX(íƒˆì¤‘ì•™í™”ê±°ë˜ì†Œ) êµ¬í˜„.*

<aside>
â¡ï¸ **DEX; (Decentralized Exchange)**

**ê¸°ì¡´ì˜ ì¤‘ì•™í™”ê±°ë˜ì†Œ(CEX)ê°€ ì•„ë‹Œ ê°œì¸ ê°„ ê¸ˆìœµ(P2P)ì´ ê°€ëŠ¥í•œ íƒˆì¤‘ì•™í™”(ë¶„ì‚°í˜•) ê±°ë˜ì†Œ.** ë²•ì •í™”íì™€ ì•”í˜¸í™”íê°„ì˜ êµí™˜ì„ í—ˆìš©í•˜ì§€ ì•Šê³ , ì•”í˜¸í™”í í† í°ì„ ë‹¤ë¥¸ ì•”í˜¸í™”í í† í°ê³¼ ê±°ë˜í•˜ì—¬ ë¸”ë¡ì²´ì¸(ë¶„ì‚° ì›ì¥) ìœ„ì— êµ¬ì¶• ë° ê¸°ë¡ëœ **ìŠ¤ë§ˆíŠ¸ê³„ì•½ì˜ ì§‘í•©**ì´ë‹¤.

</aside>
<br/>

### ğŸ’¸Â **JDEX** ë€ ?

> **ì´ì   ì§ì ‘ ìì‚°ì„ ê´€ë¦¬í•˜ê³  ì˜ˆì¹˜í•˜ì„¸ìš”.**
> 

**JDEX**ëŠ” ê¸°ì¡´ì˜ ì¤‘ì•™í™”ëœ ê±°ë˜ì†Œì˜ ì œì‚¼ì ê°œì… ì—†ì´ **ê°œì¸ ê°„ ê¸ˆìœµ(P2P) ê±°ë˜ê°€ ê°€ëŠ¥í•œ íƒˆì¤‘ì•™í™” ê±°ë˜ì†Œ** ì…ë‹ˆë‹¤.

ëˆ„êµ¬ë‚˜ JDEX ì›¹ ì‚¬ì´íŠ¸ì— ë°©ë¬¸í•˜ì—¬ **ì§€ê°‘(Kaikas)**ë¥¼ ì—°ê²°í•˜ê³  ë³´ìœ í•˜ê³  ìˆëŠ” í† í°ì„ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ **ì „ì†¡**í•˜ê±°ë‚˜ ë‹¤ë¥¸ í† í°ìœ¼ë¡œ **êµí™˜** í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜, í† í°ì„ ì§€ê°‘ì— ê°€ì§€ê³ ë§Œ ìˆëŠ” ê²ƒì´ ì•„ë‹Œ, **ë‹¨ì¼ í˜¹ì€ í˜ì–´ í’€ì— ì˜ˆì¹˜**í•˜ê³ , ìœ ë™ì„± ì œê³µì— ëŒ€í•œ **ë³´ìƒ(JDEXTOKEN)**ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

### ğŸ’¸Â Â **JDEX** ì˜ ëŒ€í‘œ ê¸°ëŠ¥

- **My Token**
    
    : ì†Œìœ í•˜ê³  ìˆëŠ” í† í° ëª©ë¡ì„ í™•ì¸í•˜ê³ , ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì›í•˜ëŠ” í† í°ì„ **ì „ì†¡** í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **Swap**
    
    : ì†Œìœ í•˜ê³  ìˆëŠ” í† í°ì„ ë‹¤ë¥¸ í† í°ë“¤ë¡œ **êµí™˜**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **Staking**
    
    : ì†Œìœ í•˜ê³  ìˆëŠ” í† í°ì„ **í’€**ì— **ì˜ˆì¹˜**í•˜ì—¬ **â€™JDEXTOKENâ€™ì„ ë³´ìƒ**ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
<br/>

### â›“ï¸Â ì™œ Klaytn ì¸ê°€ ?

1. **ì €ë¹„ìš©**
    1. íŠ¸ëœì­ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” **ê°€ìŠ¤ë¹„ê°€ 1~20ì› ìˆ˜ì¤€**ìœ¼ë¡œ, **ì´ë”ë¦¬ì›€ì˜ 1/100**ì— í•´ë‹¹í•˜ëŠ” ê°€ìŠ¤ ë¹„ìš©ì„ í•„ìš”ë¡œ í•˜ì—¬ ë§¤ìš° ì €ë ´í•©ë‹ˆë‹¤.
2. **ë†’ì€ í™•ì¥ì„±(TPS)** 
    1. Klaytnì€ ì‹¤ì œ **4000TPS**ì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ëŸ‰ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ëŠ” **1ì´ˆì— 4000íŠ¸ëœì­ì…˜ì´ í•œ ë¸”ë¡ì— ë“¤ì–´ê°€ëŠ” í™•ì¥ì„±**ìœ¼ë¡œ, 20TPS(Block Interval 15ì´ˆ)ì˜ ì´ë”ë¦¬ì›€ê³¼ 7TPS(Block Interval 10ë¶„)ì˜ ë¹„íŠ¸ì½”ì¸ì— ë¹„êµí–ˆì„ ë•Œ ì›”ë“±íˆ ë†’ì€ TPS ì…ë‹ˆë‹¤.
3. **ì§§ì€ ì™„ê²°ì„±(Finality)**
    1. ì™„ê²°ì„±ì€ **ë¸”ë¡ì— ë‹´ê¸´ ê±°ë˜ê°€ ë°”ë€” ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ë³´ì¦í•˜ëŠ” ì‹œê°„**ìœ¼ë¡œ, ë¸”ë¡ ìƒì„± ê°„ê²©(Block Interval) * ê²€ì¦ íšŸìˆ˜ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤. í´ë ˆì´íŠ¼ì€ **1ì´ˆì˜ ì™„ê²°ì„±**ì„ ê°€ì ¸ ì´ˆë‹¹ í•œ ê±´ì˜ **í•©ì˜ì™€ ë™ì‹œì— ì²˜ë¦¬**í•©ë‹ˆë‹¤. ì´ë”ë¦¬ì›€ì˜ 6ë¶„, ë¹„íŠ¸ì½”ì¸ì˜ 60ë¶„ê³¼ ë¹„êµí•˜ì—¬ ë§¤ìš° ì§§ì€ ì™„ê²°ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.
4. **ìƒˆë¡œìš´ ì‹œë„**
    1. Klaytnì— ë¹„í•˜ì—¬ ETHëŠ” ì ‘í•  ê¸°íšŒê°€ ë§ì•˜ê¸° ë•Œë¬¸ì— ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ **Klaytn Chainì„ ê²½í—˜**í•˜ê³ , ë°°ìš°ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. 

<br/>

### â›“ï¸Â ì™œ Klaytn ê¸°ë°˜ì˜ DEXì¸ê°€ ?

1. ê¸°ì¡´ì˜ ë³´í¸í™” ëœ ë±ìŠ¤ë“¤ì€ ì´ë”ë¦¬ì›€ì˜ ë©”ì´ì € ë±ìŠ¤ì¸ **ìœ ë‹ˆìŠ¤ì™‘** í˜¹ì€ **ìŠ¤ì‹œìŠ¤ì™‘**ì„ í´ë¡  ì½”ë”©í•˜ì—¬ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤. **JDEX**ëŠ” Klaytnì—ì„œ ìì²´ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” **Klaytn Dex Contracts**ë¥¼ ë¶„ì„í•˜ê³ , ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ KIP ì»¨íŠ¸ë™íŠ¸ ëŒ€ì‹  ì´ë”ë¦¬ì›€ì˜ ERC ì»¨íŠ¸ë™íŠ¸ë¥¼ ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•œ ê¸°ì¡´ Klaytn ë±ìŠ¤ë“¤ê³¼ **ì°¨ë³„ì **ì„ ë‘ì—ˆìŠµë‹ˆë‹¤.
2. **ê°œì¸ ê°„ ê¸ˆìœµ**(P2P)ì´ ì´ë£¨ì–´ì§€ëŠ” DEXì—ì„œ ì €í¬ê°€ ì¤‘ìš”í•˜ê²Œ ìƒê°í•œ 2ê°€ì§€ **ìˆ˜ìˆ˜ë£Œ**ì™€ **ì „ì†¡ ì†ë„**ì…ë‹ˆë‹¤. íƒˆì¤‘ì•™í™” ê±°ë˜ì†Œ(DEX)ì¸ ë§Œí¼ ì¤‘ì•™í™”ê±°ë˜ì†Œ(ì€í–‰)ê³¼ëŠ” ë‹¤ë¥¸ ì¥ì ì´ ìˆì–´ì•¼ í•œë‹¤ê³  ìƒê°í–ˆê³ , ìˆ˜ì—…ì„ í†µí•´ ë°°ìš´ ETHëŠ” ë¹„ì‹¼ ìˆ˜ìˆ˜ë£Œì™€ ëŠë¦° ì „ì†¡ ì†ë„ë¡œ ì²´ì¸ìœ¼ë¡œì˜ ëšœë ·í•œ ì¥ì ì„ ì°¾ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìƒëŒ€ì ìœ¼ë¡œ **ê°€ìŠ¤ë¹„ê°€ ì €ë ´**í•˜ê³ , **ì†ë„ê°€ ë¹ ë¥¸ Klaytn Chain**ì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

<br/>
<br/>

## 3. ê¸°ëŠ¥ë³„ ì‹œì—° ì˜ìƒ

- **Connect Wallet**
    
    ![wallet](https://user-images.githubusercontent.com/99964401/193564278-4a768ce2-8721-4325-a885-58fc6360881b.gif)
    
    - Kailkas ì§€ê°‘ ì—°ê²°ì„ ìœ„í•œ ëª¨ë‹¬ ì°½ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
- **My Token**
    
    ![Transfer](https://user-images.githubusercontent.com/99964401/193564312-b6082a62-6f87-410c-9212-a340e3b1fbd8.gif)
    
    - **My Token List**
        - ì—°ê²°ëœ ì§€ê°‘ ë³´ìœ í•œ Klay í† í° ë° KIP7 í† í° ë¦¬ìŠ¤íŠ¸ì—… í•©ë‹ˆë‹¤.
    - **Transfer - í† í° ì „ì†¡**
        - ë³´ìœ í•œ í† í°ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Swap**
    
    ![swap](https://user-images.githubusercontent.com/99964401/193564347-a3c9a999-ae98-44e8-8620-414f033e2a05.gif)
    
    - ë³´ìœ í•œ Klay / KIP7 í† í°ì„ ì›í•˜ëŠ” ë‹¤ë¥¸ KIP7 í† í°ìœ¼ë¡œ êµí™˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Staking - ë‹¨ì¼ ì˜ˆì¹˜**
    - ë³´ìœ í•œ í† í°ì„ ì˜ˆì¹˜í•˜ê³ , ìœ ë™ì„±ì— ëŒ€í•œ ë³´ìƒ(LP Token)ì„ ë°›ìŠµë‹ˆë‹¤.
    - **Single Pool List**
        
        **[ Deposit - ì˜ˆì¹˜ ]**
        
        ![singlepool](https://user-images.githubusercontent.com/99964401/193564394-8be9b6fa-927b-4328-9270-de635503013f.gif)
        
        **[ Withdraw - ì¶œê¸ˆ ]**
        
        ![singlewithdraw](https://user-images.githubusercontent.com/99964401/193564416-e7297b66-8dd1-4d4f-9808-4d246afd3589.gif)
        
        - ë‹¨ì¼ í’€ ëª©ë¡ì´ ë¦¬ìŠ¤íŠ¸ ì—… ë©ë‹ˆë‹¤.
        - í’€ì„ ì„ íƒí•˜ì—¬ ë‹¨ì¼ ì˜ˆì¹˜(Deposit)ì™€ ì¶œê¸ˆ(Withdraw)ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
   
- **Staking - í˜ì–´ ì˜ˆì¹˜**
    - ë³´ìœ í•œ í† í°ì„ ì˜ˆì¹˜í•˜ê³ , ìœ ë™ì„±ì— ëŒ€í•œ ë³´ìƒ(LP Token)ì„ ë°›ìŠµë‹ˆë‹¤.
    - **Pair Pool List**
        
        **[ Deposit - ì˜ˆì¹˜ ]**
        
        ![pairpool](https://user-images.githubusercontent.com/99964401/193564985-0b65695a-bd73-4253-ab97-f80208fff057.gif)
        
        **[ Withdraw - ì¶œê¸ˆ ]**
        
        ![pairwithdraw](https://user-images.githubusercontent.com/99964401/193565016-30878f12-74a4-4c69-98ea-697129a32f14.gif)
        
        - ALL / Klay / KIP í˜ì–´ í’€ ëª©ë¡ì´ ë¦¬ìŠ¤íŠ¸ ì—… ë©ë‹ˆë‹¤.
        - ì›í•˜ëŠ” í˜ì–´ í’€ì„ ì„ íƒí•˜ì—¬ í† í° í˜ì–´ ì˜ˆì¹˜(Deposit)ì™€ ì¶œê¸ˆ(Withdraw)ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    - **Create Pool**
        
        ![create](https://user-images.githubusercontent.com/99964401/193565047-24599c7c-2e84-4a2a-b995-0fbd10f6f177.gif)
        
        - ì›í•˜ëŠ” í† í° í˜ì–´ì˜ ìœ ë™ì„± í’€ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>
<br/>

## 4. ê´€ë ¨ ë¬¸ì„œ

### ğŸ“‹Â DB Schema

<img width="613" alt="DB" src="https://user-images.githubusercontent.com/99964401/193568157-2b32a512-8f18-4274-b14f-9d59167e2f0a.png">

<br/>

### ğŸ“‹Â DB Api

| EndPoint | Description | METHOD | Parameters | res |
| --- | --- | --- | --- | --- |
| /mytoken | ëª¨ë“  í† í° ì •ë³´ | GET | X | token_address, 
token_name,
token_symbol |
| staking/singlepool | ë‹¨ì¼ í’€ ì •ë³´ | GET | X | token_address, 
token_name,
token_symbol |
| staking/klaypool | Klay-KIP7 í’€ ì •ë³´ | GET | X | pair_address,    
pair_name,    
token_address,
pid |
| staking/kip7pool | KIP7-KIP7 í’€ ì •ë³´ | GET | X | pair_address,
pair_name,
tokenA_address,    
tokenB_address,
pid |
| staking/create_klaypool | Klay-KIP7 pair ìƒì„± | POST | token_address,
token_amount | X |
| staking/create_kip7pool | KIP7-KIP7 pair ìƒì„± | POST | tokenA_address,
tokenA_amount,
tokenB_address,
tokenB_amount | X |
| staking/create_singlepool | ë‹¨ì¼ í’€ ìƒì„± | POST | token_address,
token_name,
token_symbol | X |

<br/>

### ğŸ“‹Â Wireframe

![JDEX_Wireframe](https://user-images.githubusercontent.com/99964401/193565105-dad5b57b-f986-43b2-8969-44a5670d7e7e.png)


<br/>

### ğŸ“‹Â Flow Chart

![JDEX Flowchart Final drawio](https://user-images.githubusercontent.com/99964401/193568279-245cb89f-ad5a-4cde-8a1a-3534dadcb98f.png)

<br/>

### ğŸ“‹Â Token Economy

<img width="1709" alt="JDEX_TokenEconomy" src="https://user-images.githubusercontent.com/99964401/193568712-eba90a3c-1c83-4d93-9294-a3795ec1a5b1.png">

**[JDEXì˜ Token Economy]**

- **ê°œë°œì, íˆ¬ìì, ìœ ì €**ë“¤ì—ê²Œ ì ì ˆí•œ ì–‘ì˜ **í† í°ì„ ë¶„ë°°**í•˜ê³ , **ì˜ˆì¹˜(ë‹¨ì¼, í˜ì–´ í’€)**ì— ëŒ€í•œ **ë³´ìƒ**ìœ¼ë¡œ **JDX í† í°ì„ ì§€ê¸‰** ë°›ì•„ ì§€ì†ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.
- ë³´ìƒìœ¼ë¡œ ì£¼ì–´ì§€ëŠ” **JDX í† í°**ì„ **ì¼ì • ì§€ë¶„ ë³´ìœ **ì‹œ **JDEXì˜ ìš´ì˜ ë°©í–¥ì„± ë° í˜‘ì˜**ì— ëŒ€í•œ **íˆ¬í‘œ ê±°ë²„ë„ŒìŠ¤ì— ì°¸ì—¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


<br/>
<br/>

<div align=center><h1>ğŸ“š JDEX STACKS</h1></div>

<div align=center> 

  <div align=center><h3>COLLABORATION TOOL</h3></div>
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
  <img src="https://img.shields.io/badge/discord-5865F2?style=for-the-badge&logo=discord&logoColor=white">
  <img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white">
  <br>
  
  <div align=center><h3>FRONTEND</h3></div>
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> 
  <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black">
  <img src="https://img.shields.io/badge/bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white">
   <br>
  <img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white">
  <img src="https://img.shields.io/badge/axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white">
  <img src="https://img.shields.io/badge/redux-764ABC?style=for-the-badge&logo=redux&logoColor=white">
  <img src="https://img.shields.io/badge/Caver-005A2B?style=for-the-badge&logo=Caver&logoColor=white">
  <img src="https://img.shields.io/badge/figma-F24E1E?style=for-the-badge&logo=redux&logoColor=white">
  <br>
  
  <div align=center><h3>BACKEND</h3></div>
  <img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=Node.js&logoColor=white">
  <img src="https://img.shields.io/badge/express-000000?style=for-the-badge&logo=express&logoColor=white">
  <img src="https://img.shields.io/badge/mongoDB-47A248?style=for-the-badge&logo=MongoDB&logoColor=white">
  <img src="https://img.shields.io/badge/Mongoose-D0021B?style=for-the-badge&logo=Mongoose&logoColor=white">
  <img src="https://img.shields.io/badge/.env-ECD53F?style=for-the-badge&logo=.env&logoColor=white">
  <br>
  
  <div align=center><h3>BLOCKCHAIN</h3></div>
  <img src="https://img.shields.io/badge/solidity-363636?style=for-the-badge&logo=solidity&logoColor=white">
  <img src="https://img.shields.io/badge/hardhat-124191?style=for-the-badge&logo=hardhat&logoColor=white">
  <img src="https://img.shields.io/badge/truffle-840010?style=for-the-badge&logo=truffle&logoColor=white">
  <img src="https://img.shields.io/badge/Kaikas-F5AE29?style=for-the-badge&logo=Kailkas&logoColor=black">
  <img src="https://img.shields.io/badge/KlaytnIDE-003366?style=for-the-badge&logo=KlaytnIDE&logoColor=white">
  <img src="https://img.shields.io/badge/ganache-A42E2B?style=for-the-badge&logo=ganache&logoColor=white">
  <br>
  
</div>

<!-- pdf parameters

---
urlcolor: #e3232c
linkcolor: #e3232c
---

-->
<!-- start intro: only for github, remove if creating a pdf -->

</br>
</br>

# JongDex Docs <!-- omit in toc -->



## Contents<!-- omit in toc -->

- [Introduction](#introduction)
  - [Dex](#dex)
  - [Factory](#factory)
  - [Pair](#pair)
  - [Token Swap](#token-swap)
  - [Liquidity Pool](#liquidity-pool)
  - [Liquidity Provider](#liquidity-provider)
  - [Liquidity Provider Fee](#liquidity-provider-fee)
  - [Pool Tokens](#pool-tokens)
- [Smart Contracts](#smart-contracts)
  - [Deployment Order](#deployment-order)
  - [Core](#core)
    - [`DexFactory`](#dexfactory)
      - [Factory Contract: Functions](#factory-contract-functions)
    - [`DexPair`](#dexpair)
      - [Pair Contract: Events](#pair-contract-events)
      - [Pair Contract: Functions](#pair-contract-functions)
        - [`mint`](#mint)
        - [`burn`](#burn)
        - [`swap`](#swap)
  - [Periphery](#periphery)
    - [`DexRouter`](#dexrouter)
      - [Adding Liquidity](#adding-liquidity)
      - [Removing Liquidity](#removing-liquidity)
      - [Swapping tokens](#swapping-tokens)
    - [`DexLibrary`](#dexlibrary)
      - [Library Contract: Functions](#library-contract-functions)
        - [`getAmountOut`](#getamountout)
        - [`getAmountIn`](#getamountin)
  - [Farming and Staking](#farming-and-staking)
    - [`Farming`](#farming)
      - [Farming: Functions](#farming-functions)
    - [`StakingFactory`](#stakingfactory)

<!-- end intro: only for github, remove if creating a pdf -->

## Introduction

í”„ë¡œì íŠ¸ ì„¤ê³„ ê°œìš” ë° ìš©ì–´ ì •ë¦¬

### Dex

DexëŠ” [ì¼ì •í•œ ìƒìˆ˜ê³±](#constant-product-formula)ìœ¼ë¡œ ì‘ë™ë˜ê³ , ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¡œ êµ¬í˜„ë˜ëŠ” ìë™í™”ëœ ìœ ë™ì„± í”„ë¡œí† ì½œ. ì‚¬ìš©ì ì •ì˜ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìœ¼ë¯€ë¡œ ì •ì˜ëœ í† í° ì´ì½”ë…¸ë¯¸ê°€ ì—†ê³ , Dexì˜ ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” ê³ ìœ í•œ í† í¬ë…¸ë¯¹ìŠ¤ë¥¼ ì •ì˜.

### DEX platform

DEX platformì€ ë‹¤ë¥¸ [Dex protocol](#dex), farmingê³¼ staking ê°™ì€ ë‹¤ë¥¸ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì™€ ê²°í•©í•˜ì—¬ ì‚¬ìš©ë©ë‹ˆë‹¤.

### Constant Product Formula

[Dex](#dex)ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìë™í™”ëœ ì‹œì¥ í˜•ì„± ì•Œê³ ë¦¬ì¦˜  : `x * y = k`.

#### Invariant

[constant product formula](#constant-product-formula) `k` ê°’ì€ ë¶ˆë³€.

### Token Types

[Dex protocol](#dex)ì€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë‚´ì—ì„œ ERC20ì™€ KIP7 í† í° í‘œì¤€ê³¼ í•¨ê»˜ ì‘ë™í•©ë‹ˆë‹¤.

### Factory

FactoryëŠ” KLAY/KIP7, KIP7/KIP7 í˜ì–´ì— ëŒ€í•œ ê³ ìœ í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸. [`DexFactory` contract](#dexfactory) ì°¸ì¡°.

### Pair

PairëŠ” KLAY/KIP7, KIP7/KIP7 ë“± ë‘ê°œì˜ í† í° í˜ì–´ê°„ì— ê±°ë˜ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸. [`DexPair` contract](#dexpair) ì°¸ì¡°.

### Token Swap

Token swapì€ KIP7 í† í°ì„ ë‹¤ë¥¸ í† í°ê³¼ êµí™˜í•˜ëŠ” í–‰ìœ„ ì…ë‹ˆë‹¤. ê° í† í° ìŒì€ [liquidity pool](#liquidity-pool)ì— ì˜í•´ êµ¬ë™ë©ë‹ˆë‹¤.

The [`DexPair`](#dexpair)ì€ low-level swapê¸°ëŠ¥ì„ ì •ì˜í•˜ê³ , [`DexRouter`](#dexrouter) contractëŠ” ìŠ¤ì™‘ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### Liquidity Pool

Liquidity poolì€ ë‘ ê°œì˜ í† í°ì„ ë³´ìœ í•˜ê³  depositê³¼ withdrawì— ëŒ€í•œ ê·œì¹™ì„ ì‹œí–‰í•©ë‹ˆë‹¤. [Farming and Staking](#farming-and-staking) ì°¸ì¡°.

### Liquidity Provider

A liquidity providerëŠ” [liquidity pool](#liquidity-pool)ì— í•´ë‹¹ í† í° ìŒì„ ì˜ˆì¹˜í•˜ê³  ê·¸ ëŒ€ê°€ë¡œ [pool tokens](#pool-tokens)ì„ ë°›ëŠ” ì‚¬ëŒ. ê°€ê²© ìœ„í—˜ì„ ê°ìˆ˜í•˜ê³  ìˆ˜ìˆ˜ë£Œë¥¼ ë³´ìƒìœ¼ë¡œ ë°›ìŠµë‹ˆë‹¤.

### Liquidity Provider Fee

í† í° êµí™˜ì— ëŒ€í•œ Liquidity Provider FeeëŠ” 0.3%ì´ë©°, ì´ëŠ” ìœ ë™ì„± ì¤€ë¹„ê¸ˆì— ëŒ€í•œ ê¸°ì—¬ë„ì— ë¹„ë¡€í•˜ì—¬ ìœ ë™ì„± ê³µê¸‰ìì— ì˜í•´ ë¶„í• ë©ë‹ˆë‹¤.

### Pool Tokens

ìœ ë™ì„±ì´ í’€ì— ì˜ˆì¹˜ë˜ë©´ ìœ ë™ì„± í† í°(LP í† í°)ìœ¼ë¡œ ì•Œë ¤ì§„ ê³ ìœ í•œ í† í°ì´ ë°œí–‰ë˜ì–´ ê³µê¸‰ìì˜ ì£¼ì†Œë¡œ ì „ì†¡ë©ë‹ˆë‹¤. ì´ í† í°ì€ í’€ì— ëŒ€í•œ ì£¼ì–´ì§„ ìœ ë™ì„± ê³µê¸‰ìì˜ ê¸°ì—¬ë„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ê³µê¸‰ìê°€ ë°›ëŠ” ìœ ë™ì„± í† í°ì˜ ìˆ˜ëŠ” ì œê³µëœ í’€ ìœ ë™ì„±ì˜ ë¹„ìœ¨ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤. [`mint`](#mint) ì°¸ì¡°

## Smart Contracts

JongDexëŠ” [Core contracts](#core)ì™€ [Periphery contracts](#periphery)ìœ¼ë¡œ êµ¬ì„±ëœ ì‹œìŠ¤í…œì¸ Uniswap V2 ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì‹œìŠ¤í…œì„ ì‚¬ìš©.

### Deployment Order

Smart contracts are deployed in the following order:

1. WKLAY (needed for testnet)
2. [Dex Factory](#dexfactory)
3. [Dex Router](#dexrouter)
4. Dex Token(Platform Token)
5. [Farming](#farming)
6. [Staking Factory](#stakinginitializable)

### Core

#### `DexFactory`

Factory (`DexFactory`)ì»¨íŠ¸ë™íŠ¸ëŠ” ì•„ì§ ë°°í¬ë˜ì§€ ì•Šì€ KIP7/KIP7, KLAY/KIP7 í˜ì–´ ìŒì— ê³ ìœ í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸.

pairìŒì´ ë°°í¬ëœ ìˆœì„œëŠ” `allPairs`ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

factoryì»¨íŠ¸ë™íŠ¸ëŠ” ë˜í•œ í”„ë¡œí† ì½œ ì „ì²´ì˜ fee ìˆ˜ì‹ ìë¥¼ ê´€ë¦¬í•˜ëŠ”ë°, `feeToSetter`ë¥¼ í†µí•´ fee ìˆ˜ì‹ ìë¥¼ ì •ì˜í•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆëŠ” addressë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### Factory Contract: Functions

<!-- github table -->

|          Function           |                                Description                                |
| --------------------------- | ------------------------------------------------------------------------- |
| `createPair`                | ë‘ í† í° ìŒì— ëŒ€í•´ pairê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° pairë¥¼ ë§Œë“­ë‹ˆë‹¤.   |
| `getPair`                   | ë‘ í† í° ìŒì´ ì¡´ì¬í•˜ëŠ” ê²½ìš° ê·¸ ì£¼ì†Œë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.              |
| `setFeeToSetter`            | í”„ë¡œí† ì½œì˜ fee ìˆ˜ì‹ ìì˜ addressë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.              |
| `setFeeTo`                  | ì„¤ì •ëœ ì£¼ì†Œê°€ í”„ë¡œí† ì½œ ì „ì²´ì˜ fee ìˆ˜ì‹ ìë¥¼ ì œì–´í•˜ë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤. |
| `allPairsLength`            | ì§€ê¸ˆê¹Œì§€ ìƒì„±ëœ ëª¨ë“  í† í° pairì˜ ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤              |


#### `DexPair`

Pair (`DexPair`) ëŠ” factory ì»¨íŠ¸ë™íŠ¸ì— ì˜í•´ ë°°í¬ë˜ê³ , 2ê°œì˜ KIP7 í† í° ê°„ ê±°ë˜ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

ê° í† í° pairì˜ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” 2ê°œì˜ KIP7 í† í°ìœ¼ë¡œ êµ¬ì„±ëœ liquidity pool, ìœ ë™ì„± í’€ì„ ê´€ë¦¬í•˜ê³  í•´ë‹¹ í† í° pairì˜ ìµœì†Œ ìœ ë™ì„±ì€  `MINIMUM_LIQUIDITY`ë¥¼ í†µí•´ ì •ì˜ë¨.

pair ì»¨íŠ¸ë™íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë³€ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤. ë‘ í† í°ì˜ reserves, ìµœì‹ ë¸”ë¡ì˜ timestamp, ë‘ í† í°ì˜ ìµœì‹  ê°€ê²©, ê·¸ë¦¬ê³  ë‘ reservesë¡œ ê³„ì‚°ëœ kê°’.

##### Pair Contract: Events

- `Mint` eventëŠ” lpí† í°ì´ ìƒì„±ë˜ë©´ sender addressì™€ í† í° pairì˜ ê° token amountsê°€ ë‹´ê¸´ ì •ë³´ì™€ í•¨ê»˜ ì´ë²¤íŠ¸ ë°œìƒ.
- `Burn` eventëŠ” lpí† í°ì´ ì†Œê°ë  ë•Œ, sender addressì™€ recipient address, token amountsê°€ ë‹´ê¸´ ì •ë³´ì™€ í•¨ê»˜ ì´ë²¤íŠ¸ ë°œìƒ.
- `Swap` eventëŠ” swapì´ ë°œìƒí–ˆì„ ë•Œ, sender addressì™€ recipient address, swap amounts ë° received amountsê°€ ë‹´ê¸´ ì •ë³´ì™€ í•¨ê»˜ ì´ë²¤íŠ¸ ë°œìƒ
- `Sync` eventëŠ” mint, burn, swapì˜ ê²°ê³¼ë¡œ reserveê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ reserve ì •ë³´ì™€ í•¨ê»˜ ì´ë²¤íŠ¸ ë°œìƒ
- 
##### Pair Contract: Functions

<!-- github table -->

|    Function     |                                                                                     Description                                                                                      |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `initialize`    | ë‘ í† í° addressê°€ ì£¼ì–´ì§€ë©´ factory contractëŠ” pair contractë¥¼ initializeí•¨. pair contractê°€ ë°°í¬ë  ë•Œ í˜¸ì¶œë¨. |
| `getReserves`   | í† í° pairì— ëŒ€í•œ ìƒí˜¸ ì‘ìš©ì´ í¬í•¨ëœ ìµœì‹  ë¸”ë¡ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ì™€ í•¨ê»˜ ë‘ í† í°ì˜ ë³´ìœ ëŸ‰ì„ ë°˜í™˜                                  |
| [`mint`](#mint) | lp í† í° ìƒì„±                                                                                                                                                                  |
| [`burn`](#burn) | lp í† í° ì†Œê°                                                                  |
| [`swap`](#swap) | í† í° Swap                       |


<!-- github table -->

###### `mint`

`mint` functionì€`DexPair` ì»¨íŠ¸ë™íŠ¸ë¥¼ í†µí•´ ìœ ë™ì„±ì´ ì¶”ê°€ë ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜. 

ë§Œì•½ í’€ì´ ìƒˆë¡œ ìƒì„±ë˜ì—ˆê³ , lpí† í°ì´ ì•„ì§ ì—†ëŠ” ê²½ìš° liquidityëŠ” ë‘ í† í°ì˜ ë°œí–‰ëŸ‰ì˜ ê³±ì—ì„œ ìƒìˆ˜ ê°’ì„ ë¹¼ì„œ ê³„ì‚°ë©ë‹ˆë‹¤.

```
sqrt(amount0 * amount1) - MINIMUM_LIQUIDITY
```
í’€ì˜ ì²«ë²ˆì§¸ `MINIMUM_LIQUIDITY`ëŠ” ì˜êµ¬ì ìœ¼ë¡œ lock.

í’€ì˜ lpí† í° ì´ ê³µê¸‰ëŸ‰ì´ 0ì´ ì•„ë‹Œ ê²½ìš°ì˜ ìœ ë™ì„±ì€ ë‹¤ìŒê³¼ ê°™ì´ ê³„ì‚°ë©ë‹ˆë‹¤.

1. ê° í† í°ì˜ ë°œí–‰ëŸ‰ì„ í’€ì˜ lpí† í° ìˆ˜ë¡œ ê³±í•˜ê³  ì´ í† í°ì˜ ë³´ìœ ëŸ‰ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.
2. ë‹¤ìŒ ë‘ ê°’ ì¤‘ ìµœì†Œê°’ì„ ì„ íƒí•©ë‹ˆë‹¤.
   
   ```
   min((amount0 * _totalSupply) / _reserve0, (amount1 * _totalSupply) / _reserve1)
   ```

###### `burn`

`burn` functionì€ `DexPair` contractë¥¼ í†µí•´ ìœ ë™ì„±ì´ ì œê±°ë  ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜

pairì˜ ê° í† í°ì— ëŒ€í•´ ì†Œê°í•  í† í°ì˜ ì–‘ì€ í† í° ì”ì•¡ê³¼ í† í° pairì˜ ìœ ë™ì„±ì„ ê³±í•œ ë‹¤ìŒ, í’€ì— ìˆëŠ” lp í† í° ìˆ˜ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.

###### `swap`

`swap` functionì€`DexPair` contractë¥¼ í†µí•´ í† í°ì„ êµí™˜í•  ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

í† í°ì´ í˜¸ì¶œ ë˜ê¸° ì „ì— pairë¡œ ì „ì†¡ë˜ì–´ì•¼ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.


### Periphery

#### `DexRouter`

DexRouter contractëŠ” ìœ ë™ì„±ì„ ì¶”ê°€ ë° ì œê±°í•˜ê³  í† í°ì„ êµí™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ì •ì˜.

##### Adding Liquidity

Functions for adding liquidity for a pair of tokens:

- `addLiquidity` functionì€ kip7/kip7 í’€ì— ìœ ë™ì„±ì„ ê³µê¸‰í•˜ëŠ” í•¨ìˆ˜
- `addLiquidityKLAY` functionì€ klay/kip7 í’€ì— ìœ ë™ì„±ì„ ê³µê¸‰í•˜ëŠ” í•¨ìˆ˜

ë§Œì•½ pairê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° Factory contractë¥¼ í˜¸ì¶œí•´ ì›í•˜ëŠ” ì–‘ì˜ í† í°ìœ¼ë¡œ ìƒˆ pairë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

ì´ í•¨ìˆ˜ëŠ” í’€ë¡œ ì „ì†¡ëœ í† í°ì˜ ì–‘ê³¼ mintë¥¼ í†µí•´ ë°œí–‰ëœ lpí† í°ì˜ ì–‘ì„ returní•©ë‹ˆë‹¤.

##### Removing Liquidity

There are multiple functions for removing liquidity for a pair of tokens:

- `removeLiquidity` functionì€ kip7/kip7 í’€ì— ìœ ë™ì„±ì„ ì œê±°í•˜ëŠ” í•¨ìˆ˜
- `removeLiquidityKLAY` functionì€ klay/kip7 í’€ì— ìœ ë™ì„±ì„ ê³µê¸‰í•˜ëŠ” í•¨ìˆ˜

ì´ í•¨ìˆ˜ëŠ” í’€ì—ì„œ ë°›ì€ í† í°ì˜ ì–‘ì„ returní•©ë‹ˆë‹¤.

##### Swapping tokens

There are multiple functions for swapping tokens for different kinds of swap operations.

Functions for receiving tokens:

- `swapTokensForExactTokens` ê°€ëŠ¥í•œ ì ì€ amountsì˜ í† í° ì…ë ¥ê°’ì— ëŒ€í•´ ì •í™•í•œ ì–‘ì˜ ì¶œë ¥ë˜ëŠ” í† í°ì˜ amountsë¡œ êµí™˜
- `swapTokensForExactKLAY` ê°€ëŠ¥í•œ ì ì€ amountsì˜ í† í° ì…ë ¥ê°’ì— ëŒ€í•´ ì •í™•í•œ ì–‘ì˜ ì¶œë ¥ë˜ëŠ” klayì˜ amountsë¡œ êµí™˜
- `swapKLAYForExactTokens` ê°€ëŠ¥í•œ ì ì€ amountsì˜ klayì— ëŒ€í•´ ì •í™•í•œ amountsì˜ í† í°ìœ¼ë¡œ êµí™˜.
- 
Functions for sending tokens:

- `swapExactTokensForTokens` ì •í™•í•œ amountsì˜ í† í° ì…ë ¥ê°’ì„ ê°€ëŠ¥í•œ ë§ì€ amountsì˜ í† í°ìœ¼ë¡œ êµí™˜
- `swapExactKLAYForTokens` ì •í™•í•œ amountsì˜ klay ì…ë ¥ê°’ì„ ê°€ëŠ¥í•œ ë§ì€ amountsì˜ í† í°ìœ¼ë¡œ êµí™˜
- `swapExactTokensForKLAY` ì •í™•í•œ amountsì˜ í† í° ì…ë ¥ê°’ì„ ê°€ëŠ¥í•œ ë§ì€ amountsì˜ klayë¡œ êµí™˜


ìŠ¤ì™‘ ê¸°ëŠ¥ì— ëŒ€í•œ ì…ë ¥ íŒŒë¼ë¯¸í„°ëŠ” pathì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ê° ì—°ì† ì£¼ì†Œ pairì— ëŒ€í•´ pair contractê°€ ì¶©ë¶„í•œ ìœ ë™ì„±ì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ ìš”ì†ŒëŠ” ì…ë ¥ í† í°ì´ê³  ë§ˆì§€ë§‰ ìš”ì†ŒëŠ” ì¶œë ¥ í† í°ì…ë‹ˆë‹¤. ì…ë ¥ ë° ì¶œë ¥ í† í°ì— ëŒ€í•œ ìŒ ê³„ì•½ì´ ì—†ëŠ” ê²½ìš° ìŠ¤ì™‘ì„ ìˆ˜í–‰í•  ì¤‘ê°„ ìŒì„ ì •ì˜í•©ë‹ˆë‹¤.

#### `DexLibrary`


##### Library Contract: Functions

<!--github table -->

|            Function             |                                                                                                     Description                                                                                                      |
| ------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `sortTokens`                    | í† í° pairì— ëŒ€í•´ ì •ë ¬ëœ í† í° ì£¼ì†Œë¥¼ return                                                                                                                                               |
| `pairFor`                       | ì™¸ë¶€ í˜¸ì¶œ ì—†ì´ pairì— ëŒ€í•œ ì£¼ì†Œë¥¼ return                                                                                                                                          |
| `getReserves`                   | pairì— ëŒ€í•œ reserveë¥¼ ê°€ì ¸ì˜¤ê³  ì •ë ¬í•©ë‹ˆë‹¤.                                                                                                                                              |
| `quote`                         | í•˜ë‚˜ì˜ amountì™€ reserveA, reserveBê°€ ì£¼ì–´ì¡Œì„ ë•Œ ë‹¤ë¥¸ ìì‚°ê³¼ ë™ì¼í•œ ê¸ˆì•¡ì„ ë°˜í™˜. amountB = amountA * reserveB / reserveA |
| [`getAmountOut`](#getamountout) | Input amountê°€ ì£¼ì–´ì¡Œì„ ë•Œ ìµœëŒ€ output amountë¥¼ ê³„ì‚°í•´ì¤ë‹ˆë‹¤ .                 |
| [`getAmountIn`](#getamountin)   | Output amountê°€ ì£¼ì–´ì¡Œì„ ë•Œ í•„ìš”í•œ input amountë¥¼ ê³„ì‚°í•´ì¤ë‹ˆë‹¤.|
| `getAmountsOut`                 | ì—¬ëŸ¬ pairì— ëŒ€í•´ ì—°ì‡„ì ìœ¼ë¡œ getAmountoutì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.  |
| `getAmountsIn`                  | ì—¬ëŸ¬ pairì— ëŒ€í•´ ì—°ì‡„ì ìœ¼ë¡œ getAmountinì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.    |

###### `getAmountOut`

`amountIn`ê³¼ pair reserves(`reserveIn`, `reserveOut`)ì´ ì£¼ì–´ì§€ë©´ pairì—ì„œ ìµœëŒ€ outputì„ returní•©ë‹ˆë‹¤.

1. ìˆ˜ìˆ˜ë£Œ ê³„ì‚° í›„ ì…ë ¥ ê¸ˆì•¡ì„ ì°¾ìŠµë‹ˆë‹¤. ìˆ˜ìˆ˜ë£ŒëŠ” 0.3%ì…ë‹ˆë‹¤. `amountInWithFee`ì€ ì…ë ¥ ê¸ˆì•¡ì— 997ì„ ê³±í•˜ì—¬ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   ```
   amountIn * 997
   ```
2. `amountInWithFee` ì™€ ë‹¤ë¥¸ í† í°ì˜ reserveë¥¼ ê³„ì‚°
   ```
   amountInWithFee * reserveOut
   ```
3. `amountInWithFee`ì™€ ì…ë ¥ ìì‚° reserveì˜ í•©ê³„ì— 1000ì„ ê³±í•œ ê°’ì„ êµ¬í•©ë‹ˆë‹¤.
   ```
   reserveIn * 1000 + amountInWithFee
   ```
4. ì¶œë ¥ëŸ‰ì„ ì°¾ìœ¼ë ¤ë©´ 2ë‹¨ê³„ì—ì„œ ê³„ì‚°í•œ ê°’ì„ 3ë‹¨ê³„ì—ì„œ ê³„ì‚°í•œ ê°’ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.
   
   ```
   (amountInWithFee * reserveOut) / (reserveIn * 1000 + amountInWithFee)
   ```

ì´ ê°’ì´ ì œê³µëœ ì…ë ¥ ê¸ˆì•¡ì— ëŒ€í•´ ì œê³µí•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ í† í°ì˜ ìµœëŒ€ amountì…ë‹ˆë‹¤.


###### `getAmountIn`

`amountOut`ê³¼ pair reserves (`reserveIn`, `reserveOut`)ê°€ ì£¼ì–´ì§€ë©´ ë‹¤ë¥¸ í† í°ì˜ í•„ìš”í•œ ì…ë ¥ `amountIn`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

1. (`amountOut`)ê³¼ ë‹¤ë¥¸ ì…ë ¥ ìì‚°ì˜ (`reserveIn`)ì—  `1000`ì„ ê³±í•©ë‹ˆë‹¤.
   ```
   reserveIn * amountOut * 1000
   ```
2.  (`reserveOut`)ì—ì„œ `amountOut`ì„ ëº€ ì¶œë ¥ ê°’ì— 997ì„ ê³±í•©ë‹ˆë‹¤
   ```
   (reserveOut - amountOut) * 997
   ```
3. í•„ìš”í•œ ì…ë ¥ amountë¥¼ ì°¾ìœ¼ë ¤ë©´ 1ë‹¨ê³„ì—ì„œ ê³„ì‚°ëœ ê°’ì„ 2ë‹¨ê³„ì—ì„œ ê³„ì‚°ëœ ê°’ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.
   ```
   (reserveIn * amountOut * 1000) / ((reserveOut - amountOut) * 997)
   ```

### Farming and Staking


#### `Farming`


##### Farming: Functions

<!-- github table -->

|                 Function                  |                                                                                                          Description                                                                                                           |
| ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `add`                                     | ìƒˆ LP íŒŒë° poolì„ ì¶”ê°€í•©ë‹ˆë‹¤. LP í† í°ì˜ ì£¼ì†Œ, allocation points, í’€ ë³´ìƒ ë°°ìœ¨ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ í’€ì´ ì¶”ê°€ë©ë‹ˆë‹¤. |
| `deposit`                                 | ì§€ì •ëœ í’€ì— LP í† í°ì„ ì˜ˆì¹˜í•©ë‹ˆë‹¤.                                                      |
| `withdraw`                                | ì§€ì •ëœ í’€ì—ì„œ LPí† í°ì„ ì¸ì¶œí•©ë‹ˆë‹¤.                                                                 |
| `emergencyWithdraw`                       | ë³´ìƒì„ ë°›ì§€ ì•Šê³  ì§€ì •ëœ í’€ì—ì„œ LP í† í°ì„ ì¸ì¶œí•©ë‹ˆë‹¤.                                                                                                                        |
| `set`                                     | ì§€ì •ëœ í’€ì—ì„œ JDEXT allocation pointsë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.                                                                                        |
| [`updatePool`](#farming-updatepool)       | ì£¼ì–´ì§„ í’€ì— ëŒ€í•œ ë³´ìƒ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.                                                                                                                                                                                    |
| `massUpdatePools`                         | ëª¨ë“ í™œì„± í’€ì—ëŒ€í•œ JDEXT ë³´ìƒì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.                                                                                                                      |
| `updateMultiplier`                        | ì§€ì •ëœ í’€ì— ëŒ€í•œ ë³´ìƒ multiplierì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.                                                                                                  |
| `updatePtnPerBlock`                       | ë¸”ë¡ë‹¹ ìƒì„±ëœ JDEXT í† í° ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤                                                                                                                                |
| [`getMultiplier`](#farming-getmultiplier) | ì§€ì •ëœ í’€ì—ëŒ€í•´ ì£¼ì–´ì§„ ë‘ ë¸”ë¡ ì‚¬ì´ì˜ multiplierë¥¼ returní•©ë‹ˆë‹¤.                                 |
| `safePtnTransfer`                         | ì§€ì •ëœ ì–‘ì˜ JDEXTë¥¼ ì§€ì •ëœ addressë¡œ transferí•©ë‹ˆë‹¤.                                    |                                                                                                                                                             |

#### `StakingFactory`

ìŠ¤í…Œì´í‚¹ì„ í†µí•´ ì‚¬ìš©ìëŠ” ë§Œë“¤ì–´ì§„ í’€ì— ëŒ€í•œ í† í°ì„ ìŠ¤í…Œì´í‚¹í•˜ê³  JDEXí† í°ì„ ë³´ìƒìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.



##### Staking: Functions

|                  Function                   |                                                    Description                                                     |
| ------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| `initialize`                                | ìŠ¤í…Œì´í‚¹ contractë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.        |
| `deposit`                                   | ìŠ¤í…Œì´í‚¹ëœ í† í°ì„ ì˜ˆì¹˜í•˜ê³  ë³´ìƒ í† í°ì´ ìˆëŠ” ê²½ìš° ë°›ìŠµë‹ˆë‹¤. |
| `withdraw`                                  | ìŠ¤í…Œí‚¹ëœ í† í°ì„ ì¸ì¶œí•˜ê³  ë³´ìƒ í† í°ì´ ìˆëŠ” ê²½ìš° ë°›ìŠµë‹ˆë‹¤.|
| `recoverToken`                              | ì‹¤ìˆ˜ë¡œ ì»¨íŠ¸ë™íŠ¸ë¡œ ë³´ë‚¸ í† í°ì„ ë³µêµ¬í•©ë‹ˆë‹¤. |
| `updatePoolLimitPerUser`                    | ì‚¬ìš©ìë‹¹ í’€ ì œí•œì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.            |
| `updateRewardPerBlock`                      | ë¸”ë¡ë‹¹ ë³´ìƒì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. |
| `updateStartAndEndBlocks`                   | ì‹œì‘ ë° ì¢…ë£Œ ë¸”ë¡ì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.  |
| [`_updatePool`](#staking-_updatepool)       | ì£¼ì–´ì§„ í’€ì— ëŒ€í•œ ë³´ìƒ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. |
| [`_getMultiplier`](#staking-_getmultiplier) | ì§€ì •ëœ í’€ì— ëŒ€í•´ ì£¼ì–´ì§„ ë‘ ë¸”ë¡ ì‚¬ì´ì˜ ë³´ìƒ multiplierë¥¼ return í•©ë‹ˆë‹¤   |
| `hasUserLimit`                              | user limitì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤ |


